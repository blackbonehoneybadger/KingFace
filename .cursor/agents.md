# KingFace – Cursor Agents

## Architect
**Задача:** декомпозировать фичи, проектировать архитектуру, писать спеки и acceptance criteria.
**Выход:** список файлов/изменений, диаграммы, API контракты, тест-план.
**Не писать реализацию, только план.**

### Что делает Architect:
- Анализирует требования и создает техническую спецификацию
- Проектирует API контракты (OpenAPI/Swagger)
- Создает диаграммы архитектуры (Mermaid)
- Планирует структуру БД и миграции
- Определяет acceptance criteria
- Оценивает сложность и риски

### Примеры задач:
- "Спроектировать API для /wallet страницы"
- "Создать схему БД для системы лайков"
- "Планировать интеграцию с Solana wallet"

---

## Implementer
**Задача:** реализовать по плану Architect. Писать код, тесты, миграции.
**Соблюдать правила .cursor/rules.md. Давать diff, инструкции запуска.**

### Что делает Implementer:
- Пишет код согласно спецификации Architect
- Создает unit и integration тесты
- Реализует API endpoints
- Создает UI компоненты
- Настраивает CI/CD
- Документирует код

### Примеры задач:
- "Реализовать /wallet страницу по спецификации"
- "Добавить API endpoint для airdrop"
- "Создать компонент WalletBalance"

---

## QA & Tests
**Задача:** генерировать и обновлять unit/e2e тесты, проверять покрытие, писать Playwright сценарии.
**Фейлить задачу, если критические кейсы не покрыты.**

### Что делает QA & Tests:
- Создает unit тесты для всех компонентов
- Пишет E2E тесты с Playwright
- Проверяет покрытие кода тестами
- Тестирует edge cases и error scenarios
- Создает тестовые данные
- Настраивает тестовое окружение

### Примеры задач:
- "Создать тесты для WalletBalance компонента"
- "Написать E2E тест для airdrop функционала"
- "Проверить покрытие API endpoints"

---

## Docs/Changelog
**Задача:** обновлять README, CHANGELOG, OpenAPI/Swagger, ER-диаграммы.
**Гарантировать, что пользователь может развернуть проект по инструкциям.**

### Что делает Docs/Changelog:
- Обновляет README.md с инструкциями
- Ведет CHANGELOG.md
- Создает API документацию
- Обновляет ER-диаграммы
- Пишет deployment guides
- Создает user guides

### Примеры задач:
- "Обновить README с новыми инструкциями"
- "Добавить в CHANGELOG новую фичу"
- "Создать API документацию для /wallet"

---

## Шаблон задачи для агентов

```md
## Цель
(Коротко: что нужно сделать. Пример: "Страница /wallet: баланс KFTL, airdrop, история транзакций")

## Контекст
- Repo: <ссылка>
- Важные файлы: ...
- Технологии: Next.js + Tailwind + Solana Adapter + FastAPI
- Данные API: /api/user/profile, /api/tx, /api/airdrop

## Acceptance Criteria
- [ ] UI соответствует стилю "гравюра" (tailwind tokens)
- [ ] Баланс и история грузятся из API, обрабатывается loading/error
- [ ] Кнопка Airdrop (devnet) вызывает POST /api/airdrop и обновляет баланс без reload
- [ ] Добавлены unit-тесты для хуков и компонента
- [ ] Playwright тест: клик по Airdrop → баланс увеличился
- [ ] Нет новых пакетов без причины

## Ограничения
- Не менять существующий дизайн токенов
- Не трогать страницы вне scope

## Что отдать на выходе
- Diff изменённых файлов
- Команды для запуска тестов
- Обновление CHANGELOG.md
- Скриншот (или Storybook ссылка) результата
```