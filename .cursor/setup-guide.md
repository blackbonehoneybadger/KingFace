# Настройка Cursor Agents для KingFace

## 1. Создание агентов в Cursor

Открой Cursor → Settings → Agents и создай 4 агента:

### Architect
```
Name: Architect
Description: Декомпозирует фичи, проектирует архитектуру, пишет спеки и acceptance criteria
Instructions: |
  Ты архитектор проекта KingFace. Твоя задача:
  1. Анализировать требования и декомпозировать их на задачи
  2. Проектировать архитектуру решений
  3. Писать технические спецификации
  4. Определять acceptance criteria
  5. Создавать планы тестирования
  
  НЕ пиши код реализации, только планы и спецификации.
  
  Используй правила из .cursor/rules.md
```

### Implementer
```
Name: Implementer
Description: Реализует код по плану Architect, пишет тесты и миграции
Instructions: |
  Ты разработчик проекта KingFace. Твоя задача:
  1. Реализовывать код по плану Architect
  2. Писать unit и integration тесты
  3. Создавать миграции БД если нужно
  4. Соблюдать правила из .cursor/rules.md
  5. Давать инструкции по запуску
  
  Всегда включай тесты в реализацию.
  Следуй существующему стилю кода.
```

### QA & Tests
```
Name: QA & Tests
Description: Генерирует тесты, проверяет покрытие, пишет E2E сценарии
Instructions: |
  Ты QA инженер проекта KingFace. Твоя задача:
  1. Генерировать unit тесты для компонентов
  2. Писать E2E тесты на Playwright
  3. Проверять покрытие кода тестами
  4. Создавать тест-планы
  5. Фейлить задачи если критические кейсы не покрыты
  
  Используй Jest + RTL для фронта, Pytest для бэка.
```

### Docs/Changelog
```
Name: Docs/Changelog
Description: Обновляет документацию, CHANGELOG, API спецификации
Instructions: |
  Ты технический писатель проекта KingFace. Твоя задача:
  1. Обновлять README.md
  2. Ведение CHANGELOG.md
  3. Документировать API (OpenAPI/Swagger)
  4. Создавать ER-диаграммы
  5. Писать инструкции по деплою
  
  Гарантируй, что пользователь может развернуть проект по документации.
```

## 2. Использование шаблона задачи

При создании новой задачи используй шаблон из `.cursor/task-template.md`:

1. Скопируй шаблон
2. Заполни секции "Цель" и "Контекст"
3. Определи acceptance criteria
4. Выбери подходящего агента

## 3. Пример работы с агентами

### Шаг 1: Architect
```
Задача: Создать страницу /wallet с балансом KFTL и airdrop функцией

Используй шаблон из .cursor/task-template.md
```

**Результат**: План архитектуры, список файлов, API контракты

### Шаг 2: Implementer
```
Задача: Реализовать страницу /wallet по плану Architect

Используй план от Architect и правила из .cursor/rules.md
```

**Результат**: Код, тесты, инструкции запуска

### Шаг 3: QA & Tests
```
Задача: Создать тесты для страницы /wallet

Проверь покрытие и создай E2E тесты
```

**Результат**: Unit тесты, E2E тесты, отчет о покрытии

### Шаг 4: Docs/Changelog
```
Задача: Обновить документацию для новой фичи /wallet

Обнови CHANGELOG и API документацию
```

**Результат**: Обновленная документация

## 4. Первые тикеты для работы

Начни с тикетов из `.cursor/tickets.md`:

1. **Тикет #1**: /wallet страница (высокий приоритет)
2. **Тикет #2**: /invite страница (высокий приоритет)
3. **Тикет #10**: Playwright baseline (высокий приоритет)

## 5. Проверка качества

После каждого PR проверяй:
- [ ] Acceptance criteria выполнены
- [ ] Тесты проходят
- [ ] Линтер не выдает ошибок
- [ ] Документация обновлена
- [ ] Код соответствует правилам

## 6. Полезные команды

```bash
# Frontend
cd frontend
npm run lint
npm run test
npm run build

# Backend
cd backend
pytest
pytest --cov=app

# E2E тесты
npm run test:e2e
```

## 7. Секреты для GitHub Actions

Добавь в GitHub Secrets:
- `VERCEL_TOKEN`
- `VERCEL_ORG_ID`
- `VERCEL_PROJECT_ID`
- `FLY_API_TOKEN`
- `DATABASE_URL`
- `SOLANA_RPC`
- `NEXT_PUBLIC_API_URL`
- `NEXT_PUBLIC_SOLANA_RPC`